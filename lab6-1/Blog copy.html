<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blog</title>
    <style>
      body {
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        margin: 0;
      }
      footer {
        margin: auto auto 30px auto;
        box-sizing: border-box;
      }
    </style>
    <script>
      function Blog(body, date) {
        this.body = body;
        this.date = new Date(date);
      }

      Blog.prototype.toHTML = function () {
        return `<p><strong>[${this.date.toLocaleDateString(
          "en-GB"
        )}]</strong> ${this.body}</p>`;
      };

      Blog.prototype.containsText = function (text) {
        return this.body.toLowerCase().includes(text.toLowerCase());
      };

      Blog.prototype.toString = function () {
        return `[${this.date.toLocaleDateString("en-GB")}] ${this.body}`;
      };

      Blog.prototype.signature = "© John Doe";

      const blog = [
        new Blog("Got the new book I ordered...", "2020-08-28"),
        new Blog("It was a pretty sunny day...", "2020-08-14"),
        new Blog("And now we begin to learn again", "2020-09-01"),
        new Blog("I got a new bicycle and look forward to ride", "2020-09-15"),
        new Blog("Joined a coding bootcamp!", "2020-10-01"),
        new Blog("Started learning JavaScript.", "2021-01-01"),
        new Blog("Created my first web page!", "2021-01-10"),
        new Blog("Building projects is fun!", "2021-02-15"),
        new Blog("Looking forward to new challenges.", "2021-03-01"),
        new Blog("Never stop learning!", "2021-05-20"),
      ];

      function showBlog() {
        const blogDiv = document.getElementById("blog");
        blogDiv.innerHTML = blog.map((entry) => entry.toHTML()).join("");
      }

      function randomBlog() {
        const randomEntry = blog[Math.floor(Math.random() * blog.length)];
        alert(randomEntry.toString() + " " + randomEntry.signature);
      }

      function searchBlog() {
        const searchText = document
          .getElementById("searchtext")
          .value.toLowerCase();
        const result = blog.find((entry) => entry.containsText(searchText));
        const searchFail = document.getElementById("searchfail");
        if (result) {
          searchFail.innerHTML = "";
          alert(result.toString() + " " + result.signature);
        } else {
          searchFail.innerHTML = "No matches found.";
        }
      }

      function sortBlog() {
        blog.sort((a, b) => b.date - a.date);
      }

      window.onload = function () {
        sortBlog();
        showBlog();
      };
    </script>
  </head>
  <body>
    <h1>My Blog</h1>
    <input type="text" id="searchtext" placeholder="Search blog" />
    <button onclick="searchBlog()">Search</button>
    <button onclick="randomBlog()">Random Entry</button>
    <div id="blog"></div>
    <footer>© 2024 John Doe</footer>
  </body>
</html>
