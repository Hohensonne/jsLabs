<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab 5</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        #today {
            font-size: 20px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 20px;
        }
        #maiProgress {
            width: 100%;
            height: 30px;
            position: relative;
            background-color: #ddd;
            margin-top: 10px;
        }
        #maiBar {
            background-color: #0480b6;
            width: 10px;
            height: 30px;
            position: absolute;
        }
        table {
            width: 200px;
            height: 100px;
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <!-- Раздел "Сегодня" -->
    <div id="today"></div>

    <!-- Раздел "Таймер" -->
    <div class="mb-4">
        <h3>Таймер</h3>
        <input type="text" id="secondsInput" placeholder="Введите секунды">
        <button class="btn btn-primary" id="startTimer" onclick="startTimer()">Запустить таймер</button>
        <p id="timerOutput"></p>
    </div>

    <!-- Раздел "Мой день рождения" -->
    <div class="mb-4">
        <h3>Мой день рождения</h3>
        <p id="birthdayInfo">Мой следующий день рождения 00.00.0000, до него осталось 00 дней</p>
    </div>

    <!-- Раздел "Добавление в массив" -->
    <div class="mb-4">
        <h3>Добавить элемент в массив</h3>
        <input type="text" id="arrayInput">
        <button class="btn btn-success" onclick="addToArray()">Добавить</button>
        <button class="btn btn-info" onclick="showArray()">Показать</button>
        <p id="arrayOutput"></p>
    </div>

    <!-- Раздел "Фильтрация массива" -->
    <div class="mb-4">
        <h3>Фильтрация массива</h3>
        <p>Массив до фильтрации: <span id="beforeFilter"></span></p>
        <p>Массив после фильтрации: <span id="afterFilter"></span></p>
    </div>

    <!-- Раздел "Работа с массивом случайных чисел" -->
    <div class="mb-4">
        <h3>Работа с массивом случайных чисел</h3>
        <p>Массив, разделенный на 2: <span id="dividedArray"></span></p>
        <p>Элементы, которые делятся на 3 с остатком 1: <span id="filteredArray"></span></p>
        <p>Произведение всех элементов: <span id="arrayProduct"></span></p>
    </div>

    <!-- Раздел "Прогресс обучения" -->
    <div class="mb-4">
        <h3>Прогресс обучения в МАИ</h3>
        <div id="maiProgress">
            <div id="maiBar"></div>
        </div>
        <p id="courseLabel">1 курс</p>
        <button class="btn btn-primary" onclick="startBar()">Начать учиться!</button>
        <br>
        <table id="colorTable"></table>
        <br>
        <button class="btn btn-danger" onclick="stopChangingColor()">Закончить отмечать диплом</button>
    </div>

    <script type="text/javascript">
        // 1. Раздел "Сегодня"
        window.onload = function(){
            var date = new Date();
            var day = String(date.getDate()).padStart(2, '0');
            var month = String(date.getMonth() + 1).padStart(2, '0');
            var year = date.getFullYear();
            document.getElementById("today").innerHTML = "Сегодня " + day + "." + month + "." + year;
            updateBirthday();
            showBeforeAfterFilter();
        };

        // 2. Таймер
        let timerInterval;
        function startTimer() {
            let seconds = parseInt(document.getElementById('secondsInput').value);
            if (isNaN(seconds) || seconds <= 0) {
                alert("Введите корректное количество секунд");
                return;
            }

            document.getElementById('startTimer').disabled = true;
            let totalTime = seconds;

            timerInterval = setInterval(() => {
                let hours = Math.floor(seconds / 3600);
                let minutes = Math.floor((seconds % 3600) / 60);
                let secs = seconds % 60;
                document.getElementById('timerOutput').innerHTML = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;

                if (seconds <= 0) {
                    clearInterval(timerInterval);
                    alert("Таймер сработал!");
                    document.getElementById('startTimer').disabled = false;
                }
                seconds--;
            }, 1000);
        }

        // 3. Мой день рождения
        function updateBirthday() {
            let today = new Date();
            let birthday = new Date(today.getFullYear(), 5, 18); // Пример дня рождения - 18 июня
            if (today > birthday) birthday.setFullYear(today.getFullYear() + 1);

            let daysLeft = Math.ceil((birthday - today) / (1000 * 60 * 60 * 24));
            document.getElementById('birthdayInfo').innerHTML = `Мой следующий день рождения ${String(birthday.getDate()).padStart(2, '0')}.${String(birthday.getMonth() + 1).padStart(2, '0')}.${birthday.getFullYear()}, до него осталось ${daysLeft} дней`;
        }

        // 4. Добавление в массив
        let array = [];
        function addToArray() {
            let value = document.getElementById('arrayInput').value;
            array.push(value);
            document.getElementById('arrayInput').value = '';
        }

        function showArray() {
            let output = '';
            array.forEach((value, index) => {
                output += `Элемент ${index} = ${value}<br>`;
            });
            document.getElementById('arrayOutput').innerHTML = output;
        }

        // 5. Фильтрация массива
        let originalArray = [NaN, 0, 15, false, -14, '', undefined, 53, null];
        function filterArray(arr) {
            return arr.filter(item => item !== null && item !== 0 && item !== "" && item !== false && item !== undefined && !isNaN(item));
        }

        function showBeforeAfterFilter() {
            document.getElementById('beforeFilter').innerText = JSON.stringify(originalArray);
            document.getElementById('afterFilter').innerText = JSON.stringify(filterArray(originalArray));
        }

        // 6. Работа с массивом случайных чисел
        let randomArray = Array.from({ length: 20 }, () => Math.floor(Math.random() * 100));
        let dividedArray = randomArray.map(x => x / 2);
        let filteredArray = dividedArray.filter(x => x % 3 === 1);
        let product = randomArray.reduce((acc, curr) => acc * curr, 1);

        document.getElementById('dividedArray').innerText = JSON.stringify(dividedArray);
        document.getElementById('filteredArray').innerText = JSON.stringify(filteredArray);
        document.getElementById('arrayProduct').innerText = product;

        // 7. Прогресс обучения
        let barWidth = 0;
        let colorInterval;

        function startBar() {
            let progress = document.getElementById('maiBar');
            let label = document.getElementById('courseLabel');

            let interval = setInterval(() => {
                barWidth += 10;
                progress.style.width = barWidth + '%';

                if (barWidth < 25) {
                    label.innerText = '1 курс';
                } else if (barWidth < 50) {
                    label.innerText = '2 курс';
                } else if (barWidth < 75) {
                    label.innerText = '3 курс';
                } else if (barWidth < 100) {
                    label.innerText = '4 курс';
                } else {
                    clearInterval(interval);
                    startChangingColor();
                }
            }, 500);
        }

        function startChangingColor() {
            let table = document.getElementById('colorTable');
            let color = true;

            colorInterval = setInterval(() => {
                table.style.backgroundColor = color ? 'yellow' : 'green';
                color = !color;
            }, 1000);
        }

        function stopChangingColor() {
            clearInterval(colorInterval);
        }
    </script>
</body>
</html>
